version: "3.9"

services:
  bancamp-studio:
    build: .
    container_name: bancamp-studio-v4
    ports:
      - "3333:3333"
    volumes:
      # Mount renders directory so output persists on host
      - ./renders:/app/renders
      # Optional: mount source files for live development
      - ./render.html:/app/render.html
      - ./server.py:/app/server.py
    environment:
      - PYTHONUNBUFFERED=1
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "python", "-c", "import urllib.request; urllib.request.urlopen('http://localhost:3333/')"]
      interval: 30s
      timeout: 5s
      retries: 3